# Hola JS Challenge Winter 2015 (Mail Filtering Engine): Final Results

In winter 2015, we held a [programming contest](http://hola.org/challenge_mail_filter). Thanks to all who participated!

The problem statement and detailed rules are available on the contest page linked above. Now that the contest is over, we're publishing all the solutions we received, and announcing the winners.

## Statistics

We received a total of 409 submissions from 238 different participants. Only the last submission from each participant, received within the deadline, is published here in the `submissions` directory.

An additional 6 solutions were submitted after the deadline, and we considered them hors concours (off-contest). These are found in the `extra` directory.

64 solutions, or 15% of the total number, were submitted within the last 24 hours before the deadline; 15 of these were submitted within the last hour, and last one of these only 34 seconds before the deadline.

115 programs, or 48% of all participating solutions, passed our correctness tests.

The shortest correct submission is exactly 666 bytes long, while the longest one is 90274 bytes long.

## The testing methodology

The correctness and performance tests were automatic. Both kinds of testing are performed by `tests/test.js`.

The correctness tests are simple and can be found in the body of the test program. Unfortunately, many of the submissions failed on one or another corner case. Syntax errors, use of `require` (forbidden by the rules), and failure to export a `filter` function were considered correctness failures. If you are wondering why a particular solution failed, you can run the test program on the solution file and see the output.

Performance testing consisted of one large test with 100,000 messages and 100 rules. The inputs for this test (`tests/large_input.json`) were generated by `tests/generate_large_test.js`; to produce the outputs (`tests/large_output.json`), the reference implementation was used. The generating script uses a random number generator with a fixed seed, so that it produces the same output on every run. The statistical characteristics that we chose for the performance test are somewhat plausible for a real e-mail database of a typical user. Please refer to the script's source code for further details.

The performance tests were run on a 3 GHz Intel Core i7 machine running 64-bit Debian GNU/Linux (testing). Each submission was run 10 times, and the best time was selected. We re-initilized the Node.js VM with the participant's module before each call to the `filter` function. The timing was taken by the realtime clock; it included the module parsing and initialization time.

Our [reference implementation](http://hola.org/challenge_mail_filter#reference), the same as was set up on our website, is included here as `tests/reference.js`. The reference implementation includes strict input validity testing and an optional input size limitation (to restrict the load on the website); neither of these features was expected of contest submissions.

### The export controversy

After we published the contest rules, we realized that one of the requirements was ambiguous: “Your task is to write a Node.js module exporting one single function `filter(messages, rules)`”. We originally intended it to mean a named export:

```
exports.filter = function(messages, rules){ ... };
```

However, many participants interpreted it differently:

```
module.exports = function(messages, rules){ ... };
```

Both seem to be coherent interpretations of the rules, and we decided to accept either way of exporting.

Yet some other submissions did not export the function at all, but merely defined it in their source files:

```
function filter(messages, rules){ ... }
```

Because the rules clearly say “exporting”, we considered such solutions as failing. Nevertheless, we tried to fix each of these solutions and see if they would then pass. Only one solution passed, and was considered hors concours (see remark [3] in the final standings below).

## Final standings

The scores in this table are the best times achieved in performance testing, in milliseconds. Solutions for which there isn't a performance score in the table, failed correctness tests.

Because two participants shared the second place, we increased the prize budget by 500 USD, and awarded them 750 USD each. Finally, we decided to award the 350 USD special prize to the author of the shortest correct submission.

Congratulations to the winners!

Place | Name                                | Score | Remark
-----:|-------------------------------------|------:|----------------------
    1 | Denis Kreshikhin                    |   282 | **1500 USD prize**
      | Ecma Scripter                       |   330 | Disqualified[1]
    2 | Ilya Makarov                        |   356 | **750 USD prize**[2]
    2 | Yuri Kilochek                       |   356 | **750 USD prize**[2]
    3 | Sergey Golub                        |   387 | **500 USD prize**
    4 | fb5813a09c0f95242cb                 |   407 |
    5 | yuri_c                              |   451 |
    6 | Petr Shalkov                        |   469 |
    7 | Evgeny Zeyler                       |   475 |
    8 | R5t4nah6                            |   488 |
    9 | Elshad Shirinov                     |   505 |
   10 | Dmitry Rybin                        |   507 |
   11 | Denys Skychko                       |   523 |
   12 | Pavel Gruba                         |   524 |
   13 | Sergey Petkun                       |   536 |
   14 | Andrey Kostakov                     |   550 |
   15 | Typealias Nonmutating               |   561 |
   16 | Vladimir Barbarosh                  |   572 |
   17 | Ionicman                            |   584 |
   18 | Sergey Mikhailovich                 |   602 |
   19 | Andrey Chernykh                     |   617 |
   20 | Alex Kheben                         |   627 |
   21 | Maxim Drozdov                       |   629 |
   22 | Hayk Martirosyan                    |   663 |
   23 | Maxim Khoruzhko                     |   676 |
   24 | Dmitry Podgorniy                    |   678 |
   25 | Oleg Popov                          |   699 |
   26 | Igor Klopov                         |   717 |
   27 | Andrew Kashta                       |   807 |
   28 | Roman Pletnev                       |   817 |
   29 | Alina Lozhkina                      |   821 |
      | Pavel Kingsep                       |   821 | Hors concours
   30 | Stas Vasilyev                       |   831 |
      | Dmitry Rybin                        |   857 | Hors concours
   31 | Vladislav Nezhutin                  |   878 |
   32 | Ruslan Koptev                       |   893 |
   33 | Danila Sukhanov                     |   909 |
   34 | Alexandr                            |   926 |
   35 | Alexey Larkov                       |   928 |
   36 | Alexander Ilyin                     |   947 |
   37 | Nickolay Savchenko                  |   951 |
   38 | Ilya Mochalov                       |   953 |
   39 | Arkadi Klepatch                     |   960 |
   40 | Serj Karasev                        |  1000 |
   41 | Yuriy Khabarov                      |  1044 |
   42 | Vladimir Privalov                   |  1072 |
   43 | Nikolay Karev                       |  1080 |
   44 | Valeriy Petlya                      |  1125 |
   45 | Denis Protasov                      |  1166 |
   46 | Sergey Savelyev                     |  1175 |
      | Aur Saraf                           |  1184 | Hors concours
   47 | Aydar Mirzagitov                    |  1246 |
   48 | Ori Lahav                           |  1258 |
   49 | KingOfNothing                       |  1308 |
   50 | Georgy Chebanov                     |  1358 |
   51 | Denis Kepeshchuk                    |  1433 |
   52 | Jarek Płocki                        |  1477 |
   53 | Stanislav Vyshchepan                |  1521 |
      | Evgeny Semyonov                     |  1601 | Needed a fix[3]
   54 | Taras Ozarko                        |  1634 |
   55 | Black Knight                        |  1771 |
   56 | Dmitry Egorov                       |  1844 |
   57 | Anton Podkuyko                      |  1892 |
   58 | Sergey Lichack                      |  1935 |
   59 | Zibx                                |  2014 |
   60 | Vitalii Petrychuk                   |  2183 |
   61 | Vasiliy Kostin                      |  2203 |
   62 | Alexey Chemichev                    |  2327 |
   63 | Evgenii Kazmiruk                    |  2339 |
   64 | Pavel Koltyshev                     |  2363 |
   65 | Aleksey Sergey                      |  2418 |
   66 | Alexey Pushnikov                    |  2420 |
   67 | Max Brodin                          |  2616 |
   68 | serviceman                          |  2771 |
   69 | Alexander Rusakov                   |  2871 |
   70 | Ruslan Minukov                      |  2873 |
   71 | Andrey Grankin                      |  2877 |
   72 | Kobi                                |  2931 |
   73 | Alex Ku                             |  3037 |
   74 | Evgeny Lukianchikov                 |  3065 |
   75 | Nadav Ivgi                          |  3172 | **350 USD special prize**[3]
   76 | Alexander Savchuk                   |  3182 |
   77 | Alexey Sadovin                      |  3185 |
   78 | Vitali Falileev                     |  3213 |
   79 | Siroj Matchanov                     |  3214 |
   80 | Aleksei Murashin                    |  3233 |
   81 | Ivan Zakharchenko                   |  3465 |
   82 | Vitaly Dyatlov                      |  3505 |
   83 | Katerina Pavlenko                   |  3619 |
   84 | Vyacheslav Bazhinov                 |  3733 |
   85 | Denis Bezrukov                      |  4118 |
   86 | Andy5938                            |  4425 |
   87 | Volodymyr Valkiv                    |  4450 |
   88 | berrunder                           |  4625 |
   89 | Konstantin Boyandin                 |  4674 |
   90 | Oz GabsoZ                           |  4675 |
   91 | nerv                                |  5174 |
   92 | Igor Potapov                        |  5813 |
   93 | Nikolay Shevlyakov                  |  5875 |
   94 | Sergey Ivanov                       |  6207 |
   95 | Alexey Kolpakov                     |  6240 |
   96 | Dan Revah                           |  6258 |
   97 | Vladimir Osipov                     |  6518 |
   98 | Vitaliy (vint)                      |  6581 |
   99 | Vitali Koshtoev                     |  6883 |
  100 | Pavel Orlov                         |  7725 |
  101 | Amir Absalyamov                     |  7808 |
  102 | Vyacheslav Ryabinin                 |  8340 |
  103 | Daniil Onoshko                      |  8387 |
  104 | Dmitry Tarasenko                    |  9883 |
  105 | Andrey Pogoreltsev                  | 10708 |
  106 | Slava Shklyaev                      | 10742 |
  107 | Nikita Isaev                        | 13351 |
  108 | Nikolay Kuchumov                    | 13551 |
  109 | Kirill Bykov                        | 15773 |
  110 | Ilya Chervonov                      | 16426 |
  111 | Igor Vladimirovich                  | 17651 |
  112 | Shantanu Gupta                      | 21054 |
  113 | Artem Mitloshuk                     | 22244 |
  114 | Nikita Polevoy                      | 58050 |
      | Adam Yahid                          |       |
      | Aleksandrs Fiļipovs                 |       |
      | Aleksandrs Fiļipovs                 |       |
      | Alex Netkachov                      |       |
      | Alex Vishnevsky                     |       |
      | Alexander Baygeldin                 |       |
      | Alexander Dubovsky                  |       |
      | Alexander Hasselbach                |       |
      | Alexander Kazachenko                |       |
      | Alexander Nurullov                  |       |
      | Alexander Oryol                     |       |
      | Alexander Zasim                     |       |
      | Alexey Alexandrovich                |       |
      | Alexey Diyachenko                   |       |
      | Alexey Efremov                      |       |
      | Alexey Gora                         |       |
      | Alexey Nichiporchik                 |       |
      | Alexey Semashkevich                 |       |
      | Alexey Vedyakov                     |       |
      | Almaz Mubinov                       |       |
      | Anatoly                             |       |
      | Andrey Kuznetsov                    |       |
      | Andrey Saponenko                    |       |
      | Andrey Solodovnikov                 |       |
      | Anton Ivakin                        |       |
      | Anton Vashurkin                     |       |
      | Artem Kudryavtsev                   |       |
      | Artem Kudryavtsev                   |       |
      | Arthur Khusaenov                    |       |
      | Arthur Okeke                        |       |
      | Bilik Sandanov                      |       |
      | Daniel Shir                         |       |
      | Danil Baibak                        |       |
      | Denis Bogomoltsev                   |       |
      | Denis Karavayev                     |       |
      | Denis Maslov                        |       |
      | Denis Zakharov                      |       |
      | Dilshod Samatov                     |       |
      | disamis                             |       |
      | Dizzy D                             |       |
      | Dmitry Fedoryak                     |       |
      | Dmitry Kurochkin                    |       |
      | Dmitry Petrov                       |       |
      | Dmitry Poddubniy                    |       |
      | Dmitry Soloviev                     |       |
      | Dzmitry Ulasiankou                  |       |
      | Evgeny Frolov                       |       |
      | Evgeny Khramkov                     |       |
      | Evgeny Olonov                       |       |
      | Evgeny Shiryaev                     |       |
      | Grigory Alexeev                     |       |
      | Grigory Plotnikov                   |       |
      | Guy Brukhis                         |       |
      | Guy Rapaport                        |       |
      | Haim Kom                            |       |
      | Haim Kom                            |       |
      | happymarmoset                       |       |
      | Hongliang Wang                      |       |
      | Hongliang Wang                      |       |
      | Ice Kibitzer                        |       |
      | Ido Ran                             |       |
      | Igal Miroshnichenko                 |       |
      | Igor Malanyk                        |       |
      | Ihor Barakaiev and Dmitry Karaush   |       |
      | Ilya Gelman                         |       |
      | Ilya Kirichek                       |       |
      | Itay Komemy                         |       |
      | Ivan Lukashov                       |       |
      | Ivan Maltsev                        |       |
      | Ivan Nikitin                        |       |
      | Ivan Saloid                         |       |
      | Jean-Philippe Gauthier              |       |
      | jsmeister                           |       |
      | Kazim                               |       |
      | Kedem Diamant                       |       |
      | Kirill Yakovlev                     |       |
      | Konstantin Petryaev                 |       |
      | Kwek Jing Yang                      |       |
      | Kwek Jing Yang                      |       |
      | Lee Elenbaas                        |       |
      | Leonid Kuznetsov                    |       |
      | madshall                            |       |
      | MakarovEm                           |       |
      | Maksim Razumenko                    |       |
      | Mark Gubarev                        |       |
      | Max Leizerovich                     |       |
      | Moshe Revah                         |       |
      | Muthuswami Lakshminarayanan Susheel |       | Hors concours
      | mycodef                             |       |
      | Nikita Molostvov                    |       |
      | Nikolay Olonov                      |       |
      | Nurguly Ashyrov                     |       |
      | Oleg Panchenko                      |       |
      | Oleh Tsiroh                         |       |
      | Oleksandr Antonyuk                  |       |
      | Ouanalao                            |       |
      | Oz Shapira                          |       |
      | Pavel Pogodaev                      |       |
      | Pavel Polyakov                      |       |
      | Pavel Tomsha                        |       |
      | Pham Vu Tuan                        |       |
      | poluyanov                           |       |
      | Ptax                                |       |
      | qeled                               |       |
      | Raoul Foaleng                       |       |
      | Roman Timashev                      |       |
      | Rostislav Galkin                    |       |
      | Ruslan Bekenev                      |       |
      | Sashko Matviychuk                   |       |
      | Sergey Kluchkovsky                  |       |
      | Sergey Serebryakov                  |       |
      | Sergey Tolok                        |       |
      | Sergii Iakymov                      |       |
      | Sergius Galjuk                      |       |
      | Sergius Galjuk                      |       |
      | Serhiy Mitrovtsiy                   |       |
      | Serhiy Mitrovtsiy                   |       |
      | Stepan Pupkin                       |       |
      | taitulism                           |       |
      | Tan Ying Hao                        |       |
      | Timophey Nakhai                     |       |
      | Victor Follet                       |       |
      | Vitaliy Sunny                       |       |
      | Vitaly Domnikov                     |       |
      | Vladimir Menshakov                  |       |
      | Vladimir Prikhozhenko               |       |
      | Xawn Tan                            |       |
      | Yair Haimovitch                     |       |
      | Yury Loskot                         |       |

### Remarks

[1] We disqualified one participant for trying to fool the test framework. Check their solution if you want to see how. Interestingly, the submission still wasn't the fastest.

[2] Two participants share the second place because their submissions showed equal performance to the precision that we could measure it. Whatever small difference there might have been, was way below the noise floor, so we couldn't say confidently that one or the other was faster.

[3] The submission passed correctness tests after adding a proper export of the `filter` function. The entry was therefore not assigned a rank in the final standings.

## Stay tuned

More programming challenges to follow!
